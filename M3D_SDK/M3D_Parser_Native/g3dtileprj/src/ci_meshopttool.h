#pragma once

#include <string>
#include <vector>
#include <memory>
#include "gbytearray.h"
#include "basclass70.h"

using namespace std;

//================================================================================
/// MeshOpt网格压缩工具类
/// 提供基于meshoptimizer库的几何数据压缩与解压缩功能
//================================================================================
class MeshOpt_Gltfpack
{
public:
    //================================================================================
    /// 几何数据压缩（字符串版本）
    ///
    /// @param [in]  in  输入数据字符串
    /// @param [out] out 输出压缩后的数据字符串
    ///
    /// @return 操作结果
    ///         - true: 压缩成功
    ///         - false: 压缩失败
    //================================================================================
    static bool GeometryCompress(const string& in, string& out);

    //================================================================================
    /// 几何数据解压缩（字符串版本）
    ///
    /// @param [in]  in  输入压缩数据字符串
    /// @param [out] out 输出解压后的数据字符串
    ///
    /// @return 操作结果
    ///         - true: 解压成功
    ///         - false: 解压失败
    //================================================================================
    static bool GeometryDecompression(const string& in, string& out);

    //================================================================================
    /// 几何数据压缩（字符串到字节数组版本）
    ///
    /// @param [in]  in  输入数据字符串
    /// @param [out] out 输出压缩后的字节数组
    ///
    /// @return 操作结果
    ///         - true: 压缩成功
    ///         - false: 压缩失败
    //================================================================================
    static bool GeometryCompress(const string& in, CGByteArray& out);

    //================================================================================
    /// 几何数据解压缩（字符串到字节数组版本）
    ///
    /// @param [in]  in  输入压缩数据字符串
    /// @param [out] out 输出解压后的字节数组
    ///
    /// @return 操作结果
    ///         - true: 解压成功
    ///         - false: 解压失败
    //================================================================================
    static bool GeometryDecompression(const string& in, CGByteArray& out);

    //================================================================================
    /// 几何数据压缩（字节数组版本）
    ///
    /// @param [in]  in  输入数据字节数组
    /// @param [out] out 输出压缩后的字节数组
    ///
    /// @return 操作结果
    ///         - true: 压缩成功
    ///         - false: 压缩失败
    //================================================================================
    static bool GeometryCompress(const CGByteArray& in, CGByteArray& out);

    //================================================================================
    /// 几何数据解压缩（字节数组版本）
    ///
    /// @param [in]  in  输入压缩数据字节数组
    /// @param [out] out 输出解压后的字节数组
    ///
    /// @return 操作结果
    ///         - true: 解压成功
    ///         - false: 解压失败
    //================================================================================
    static bool GeometryDecompression(const CGByteArray& in, CGByteArray& out);
};