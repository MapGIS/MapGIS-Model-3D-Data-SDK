#pragma once
#include "g3dtilegaussian.h"

//================================================================================
/// SPLAT格式高斯数据读写类
/// 继承自CGGaussianReadWrite，实现对SPLAT格式高斯数据的读写操作
//================================================================================
class Ci_SplatGaussianReadWrite : public MapGIS::Tile::CGGaussianReadWrite
{
public:
	//================================================================================
	/// 默认构造函数
	//================================================================================
	Ci_SplatGaussianReadWrite() {};

	//================================================================================
	/// 虚析构函数
	//================================================================================
	virtual ~Ci_SplatGaussianReadWrite() {};

protected:
	//================================================================================
	/// 内部读取接口实现
	/// 从指定SPLAT文件路径读取高斯数据到数据模型
	///
	/// @param [in]  filePath 文件路径
	/// @param [out] data     高斯数据模型引用
	/// @return 操作结果
	///         - gisLONG > 0：读取成功
	///         - gisLONG <= 0：读取失败
	//================================================================================
	virtual gisLONG i_Read(CGString filePath, MapGIS::Tile::GaussianModel& data);

	//================================================================================
	/// 内部回调读取接口实现
	/// 从指定SPLAT文件路径读取高斯数据，通过回调函数逐个处理特征点
	///
	/// @param [in] filePath  文件路径
	/// @param [in] callback  回调函数，用于处理每个高斯特征点
	/// @return 操作结果
	///         - gisLONG > 0：读取成功
	///         - gisLONG <= 0：读取失败
	//================================================================================
	virtual gisLONG i_Read(CGString filePath, std::function<void(MapGIS::Tile::GaussianFeature& dot, bool& isStop)>& callback);

	//================================================================================
	/// 内部写入接口实现
	/// 将高斯数据模型写入到指定SPLAT文件路径
	///
	/// @param [in] filePath 文件路径
	/// @param [in] data     高斯数据模型常量引用
	/// @return 操作结果
	///         - gisLONG > 0：写入成功
	///         - gisLONG <= 0：写入失败
	//================================================================================
	virtual gisLONG i_Write(CGString filePath, const MapGIS::Tile::GaussianModel& data);
};